# REST API-сервис для создания объявления по грузоперевозкам
_REST API-сервис для создания объявления по грузоперевозкам_ — это интерфейс, который позволяет управлять объявлениями с помощью http-запросов к специальному серверу. 
Синтаксис запросов и тип возвращаемых ими данных строго определены на стороне самого сервиса.
Например, для получения информации о пользователе необходимо составить запрос такого вида:
```
http://localhost:8080/api/user/info?id=2
```
Сборка
----------------------------------
```bash
mvn clean istall
```
Запуск
----------------------------------
Для разработки запускать в конфигурации:
```
--spring.profiles.active=dev
```

База данных
------------------------------------
Создать БД spring_cargo
```sql
mysql -u root -p
CREATE DATABASE spring_cargo DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;;
```
Изменить поля в application.properties
```
spring.datasource.url = jdbc:mysql://[host]:[port]/spring_cargo?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC&useLegacyDatetimeCode=false&characterEncoding=utf8
spring.datasource.username = [username]
spring.datasource.password = [password]
```
Запросы:
-----------------------------------
### api/auth/sing-in (POST)
Авторизация пользователя
* Параметры: 
    * **email** (_строка_) - логин пользователя
    * **password** (_строка_) - пароль пользователя
* Результат: 
    * **userId** (_положительное число_) - идентификатор пользователя
    * **token** (_строка_) - токен для доступа
    * **role** (_строка_) - роль пользователя
    
### api/auth/sign-up (POST)
Регистрация пользователя
* Параметры: 
    * **email** (_строка_) - логин пользователя
    * **password** (_строка_) - пароль пользователя
    * **name** (_строка_) - имя пользователя
    * **role** (_строка_) - роль пользователя (USER, ADMIN или MODERATOR)
* Результат: После успешного выполнения возвращает 1.

### api/auth/accountVerification/{token} (GET)
Подтверждение регистрации пользователя
* Параметры: 
    * **token** (_строка_) - токен для активации аккаунта
* Результат: После успешного выполнения возвращает 1.

### api/user/info (GET)
Получить информацию о пользователе
* Параметры: 
    * **id** (_положительное число_) - идентификатор пользователя
* Результат: После успешного выполнения возвращает объект, описывающий пользователя.

### api/user (GET)
Получить всех пользователей
* Результат: После успешного выполнения возвращает массив объектов, описывающих пользователей.
* _Примечание_: Доступно только для роли ADMIN

### api/user (PUT)
Редактирование пользователя
* Параметры: 
    * **email** (_строка_) - логин пользователя
    * **password** (_строка_) - пароль пользователя
    * **name** (_строка_) - имя пользователя
    * **role** (_строка_) - роль пользователя (USER, ADMIN или MODERATOR)
* Результат: После успешного выполнения возвращает 1.

### api/user (DELETE)
Удалить пользователя
* Параметры: 
    * **id** (_положительное число_) - идентификатор пользователя
* Результат: После успешного выполнения возвращает 1.

### api/order (POST)
Создание объявления
* Параметры: 
    * **title** (_строка_) - название объявления
    * **description** (_строка_) - описание объявления
    * **type** (_строка_) - тип объявления
    * **addressSender** (_строка_) - адрес отправления
    * **addressRecipient** (_строка_) - адрес получение
    * **price** (_положительное число_) - цена
    * **departDate** (_строка_) - дата отправления
    * **arrivalDate** (_строка_) - дата получения
    * **size** (_объект_) - объект с размерами:
        *  **width** (_положительное число_) - ширина
        *  **height** (_положительное число_) - высота
        *  **length** (_положительное число_) - длина
        *  **weight** (_положительное число_) - вес
    * **imagesId** (_строка_) - массив идентификаторов изображений.
* Результат: После успешного выполнения возвращает 1.

### /api/image/upload (POST)
Загрузка изображений на сервер
* Параметры: 
    * **files** (_массив_) - массив изображений
* Результат: После успешного выполнения возвращает массив идентификаторов изображений.

### /api/image/{filename:.+} (GET)
Получение изображения
* Параметры: 
    * **filename** (_строка_) - название файла с расширением
* Результат: После успешного выполнения возвращает изображение.